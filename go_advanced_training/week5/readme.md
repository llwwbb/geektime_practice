>总结限流，熔断，降级的常用方式，重试的注意事项，负载均衡的常用方式。

### 隔离

#### 服务隔离

- 动静隔离
- 读写分离

#### 轻重隔离

- 核心隔离
- 快慢隔离
- 热点隔离

#### 物理隔离

- 进程隔离
- 进程隔离
- 集群隔离

### 超时控制

**快速失效(fail fast)**

- 超时传递

### 过载保护

**临近过载时主动抛弃流量**

- 利特尔法则 
- CoDel

#### 限流

- 令牌桶
- 漏桶
- QPS
- 用户
- 优先级

**配额**
- 最大最小公平分享

#### 熔断

- gutter
- 客户端流控

#### 降级

**提供有损服务**

- 非核心UI模块降级
  - BFF API降级
- UI使用缓存副本
- 使用默认值、备选方案替换

**处理策略**
- 页面降级、延迟服务、写/读降级、缓存降级
- 抛异常、返回约定协议、Mock 数据、Fallback 处理

#### 重试

**流量放大**

- 限制重试次数
- 随机、指数递增重试周期
- client记录重试次数直方图，又server判定
- 只在失败层重试

#### 负载均衡

**均衡流量分发**

**可靠识别异常节点**

**scale-out**

**减少错误**

- p2c算法
  - 对新启动节点进行惩罚
  - 分值需要统计衰减，避免永久黑名单